{"version":3,"sources":["webpack://app-starter-project-with-webpack/./src/public/sw.js"],"names":["importScripts","workbox","setConfig","debug","precacheAndRoute","precaching","registerRoute","routing","_workbox$strategies","strategies","StaleWhileRevalidate","CacheableResponsePlugin","CacheFirst","expiration","ExpirationPlugin","cacheableResponse","self","__WB_MANIFEST","_ref","url","origin","cacheName","plugins","statuses","_ref2","request","destination","addEventListener","event","_event$data","data","json","title","body","waitUntil","registration","showNotification","icon","badge","notification","close","clients","matchAll","type","then","clientList","_step","_iterator","_createForOfIteratorHelper","s","n","done","client","value","focus","err","e","f","openWindow","skipWaiting"],"mappings":"2/BAAA,cAAc,2EAEd,QAAQ,UAAU,CAChB,OAAO,IAGT,IAAQ,EAAqB,QAAQ,WAA7B,iBACA,EAAkB,QAAQ,QAA1B,cACR,EAA6C,QAAQ,WAA7C,EAAoB,EAApB,qBAEA,GAFgC,EAAV,WACD,QAAQ,WAA7B,iBAC4B,QAAQ,kBAApC,yBAER,EAAiB,igGAAK,eAEtB,GACE,SAAA,GAAM,MAAsB,mCAAtB,EAAH,IAAc,MAA2C,GAC5D,IAAI,EAAqB,CACvB,UAAW,YACX,QAAS,CACP,IAAI,EAAwB,CAC1B,SAAU,CAAC,EAAG,WAMtB,GACE,SAAA,GAAA,IAAG,EAAO,EAAP,QAAO,MACgB,UAAxB,EAAQ,aACgB,SAAxB,EAAQ,aACgB,WAAxB,EAAQ,WAAwB,GAClC,IAAI,EAAqB,CACvB,UAAW,sBAIf,KAAK,iBAAiB,QAAQ,SAAC,GAAU,IAAA,EACjC,GAAiB,QAAV,EAAA,EAAM,YAAI,IAAA,OAAA,EAAV,EAAY,SAAU,CACjC,MAAO,iBACP,KAAM,iCAGR,EAAM,UACJ,KAAK,aAAa,iBAAiB,EAAK,MAAO,CAC7C,KAAM,EAAK,KACX,KAAM,6CACN,MAAO,6CACP,KAAM,CACJ,IAAK,EAAK,KAAO,0BAIzB,IAEA,KAAK,iBAAiB,qBAAqB,SAAC,GAC1C,EAAM,aAAa,QACnB,EAAM,UACJ,QAAQ,SAAS,CAAE,KAAM,WAAY,MAAK,SAAC,GAAe,IACzB,EADyB,EAAA,EACnC,GAAU,IAA/B,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAiC,KAAtB,EAAM,EAAA,MACf,GAAI,EAAO,MAAQ,EAAM,aAAa,KAAK,KAAO,UAAW,EAC3D,OAAO,EAAO,OAElB,CAAC,OAAA,GAAA,EAAA,EAAA,EAAA,SAAA,EAAA,GAAA,CACD,GAAI,QAAQ,WACV,OAAO,QAAQ,WAAW,EAAM,aAAa,KAAK,IAEtD,IAEJ,IAEA,KAAK,iBAAiB,WAAW,SAAC,GAC5B,EAAM,MAA4B,iBAApB,EAAM,KAAK,MAC3B,KAAK,aAET","file":"sw.js","sourceRoot":"","sourcesContent":["importScripts('https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-sw.js');\r\n\r\nworkbox.setConfig({\r\n  debug: false\r\n});\r\n\r\nconst { precacheAndRoute } = workbox.precaching;\r\nconst { registerRoute } = workbox.routing;\r\nconst { StaleWhileRevalidate, CacheFirst } = workbox.strategies;\r\nconst { ExpirationPlugin } = workbox.expiration;\r\nconst { CacheableResponsePlugin } = workbox.cacheableResponse;\r\n\r\nprecacheAndRoute(self.__WB_MANIFEST);\r\n\r\nregisterRoute(\r\n  ({ url }) => url.origin === 'https://story-api.dicoding.dev',\r\n  new StaleWhileRevalidate({\r\n    cacheName: 'api-cache',\r\n    plugins: [\r\n      new CacheableResponsePlugin({\r\n        statuses: [0, 200],\r\n      }),\r\n    ],\r\n  })\r\n);\r\n\r\nregisterRoute(\r\n  ({ request }) => \r\n    request.destination === 'image' ||\r\n    request.destination === 'font' ||\r\n    request.destination === 'script',\r\n  new StaleWhileRevalidate({\r\n    cacheName: 'static-resources',\r\n  })\r\n);\r\n\r\nself.addEventListener('push', (event) => {\r\n  const data = event.data?.json() || {\r\n    title: 'Dicoding Story',\r\n    body: 'Anda memiliki notifikasi baru'\r\n  };\r\n\r\n  event.waitUntil(\r\n    self.registration.showNotification(data.title, {\r\n      body: data.body,\r\n      icon: '/dicoding-story-app/icons/icon-192x192.png',\r\n      badge: '/dicoding-story-app/icons/icon-192x192.png',\r\n      data: {\r\n        url: data.url || '/dicoding-story-app/'\r\n      }\r\n    })\r\n  );\r\n});\r\n\r\nself.addEventListener('notificationclick', (event) => {\r\n  event.notification.close();\r\n  event.waitUntil(\r\n    clients.matchAll({ type: 'window' }).then((clientList) => {\r\n      for (const client of clientList) {\r\n        if (client.url === event.notification.data.url && 'focus' in client) {\r\n          return client.focus();\r\n        }\r\n      }\r\n      if (clients.openWindow) {\r\n        return clients.openWindow(event.notification.data.url);\r\n      }\r\n    })\r\n  );\r\n});\r\n\r\nself.addEventListener('message', (event) => {\r\n  if (event.data && event.data.type === 'SKIP_WAITING') {\r\n    self.skipWaiting();\r\n  }\r\n});"]}